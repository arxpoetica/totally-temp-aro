<style>
  .analysis-mode-container {
    position: absolute;
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
  }
  .analysis-type {
    flex: 0 0 auto;
  }
  .old-accordion-title {
    flex: 0 0 auto;
  }
  .old-accordion-contents {
    flex: 1 1 auto;
    transition: flex-grow 100ms, flex-shrink 100ms, visibility 0ms 100ms;
    overflow: hidden;
    height: 450px;
    max-height: 500px;
    overflow: auto;
  }
  .old-accordion-contents.collapsed {
    flex: 0 0 auto;
    height: 0px;
    visibility: hidden;
  }
  .old-accordion-title {
    background-color: #333;
    color: white;
    font-weight: 700;
    font-size: 18px;
    border-radius: 0px;
  }
  .old-accordion-title:hover, .old-accordion-title:focus {
    background-color: #333;
    color: white;
  }
</style>
<div class="analysis-mode-container">
  <div class="analysis-type">
    <h4 style="text-align: center; margin-top: 20px;">Analysis Type:{{$ctrl.state.networkAnalysisType.label}}</h4>
    <div ng-switch="$ctrl.state.networkAnalysisType.id">
      <r-coverage-button ng-switch-when="COVERAGE_ANALYSIS"></r-coverage-button>
      <r-rfp-button ng-switch-when="RFP"></r-rfp-button>
      <optimize-button ng-switch-default></optimize-button>
    </div>
  </div>
  <accordion style="position: relative; flex: 1 1 auto;" toggle-expanded-panel="$ctrl.analysisModePanel">
    
    <accordion-panel-title title="'R Input'" panel-id="$ctrl.analysisModePanels.R_INPUT"></accordion-panel-title>
    <accordion-panel-contents panel-id="$ctrl.analysisModePanels.R_INPUT">
      <r-network-optimization-input on-modify="$ctrl.state.handleModifyClicked"></r-network-optimization-input>
    </accordion-panel-contents>
    
    
    <accordion-panel-title title="'Input'" panel-id="$ctrl.analysisModePanels.INPUT"></accordion-panel-title>
    <accordion-panel-contents panel-id="$ctrl.analysisModePanels.INPUT">
      <div class="col-xs-7" style="left: 20%;border: 10px solid white;">
        <!-- pull this out -->
        <select class="form-control"
          ng-model="$ctrl.state.networkAnalysisType"
          ng-options="item as item.label for item in $ctrl.state.networkAnalysisTypes">
        </select>
        
      </div>
      
      <div style="height: 100%;" ng-if="$ctrl.state.networkAnalysisType.id === 'NETWORK_PLAN' || $ctrl.state.networkAnalysisType.id === 'NETWORK_ANALYSIS'">
        <network-analysis-build 
          remove-target="$ctrl.removeTarget(target)" 
          zoom-target="$ctrl.zoomTarget(target)" 
          selection="$ctrl.state.selection">
        </network-analysis-build>
      </div>
      
      <div style="height: 100%;" ng-if="$ctrl.state.networkAnalysisType.id === 'EXPERT_MODE'">
        <analysis-expert-mode></analysis-expert-mode>
      </div>
      <div style="height: 100%;" ng-if="$ctrl.state.networkAnalysisType.id === 'COVERAGE_ANALYSIS'">
        <r-coverage-initializer></r-coverage-initializer>
      </div>
      <div style="height: 100%;" ng-if="$ctrl.state.networkAnalysisType.id === 'RFP'">
        <r-rfp-analyzer></r-rfp-analyzer>
      </div>
    </accordion-panel-contents>
    <accordion-panel-title id="output-bar" title="'Output'" panel-id="$ctrl.analysisModePanels.OUTPUT"></accordion-panel-title>
    <accordion-panel-contents panel-id="$ctrl.analysisModePanels.OUTPUT">
      <div ng-if="$ctrl.state.networkAnalysisType.id === 'NETWORK_PLAN'">
        <network-build-output ng-if="$ctrl.analysisModePanel === $ctrl.analysisModePanels.OUTPUT"></network-build-output>
      </div>
      <div ng-if="$ctrl.state.networkAnalysisType.id === 'NETWORK_ANALYSIS'">
        <r-network-analysis-output></r-network-analysis-output>
      </div>
      <div ng-if="$ctrl.state.networkAnalysisType.id === 'COVERAGE_ANALYSIS' && $ctrl.coverageReport">
        <coverage-report-downloader>
        </coverage-report-downloader>
      </div>
      <div ng-if="$ctrl.state.networkAnalysisType.id === 'RFP'">
        <button class="btn btn-primary pull-left" ng-click="$ctrl.showReportModal()">Reports</button>
        <r-reports-download-modal report-types="['RFP']" title="'RFP Reports'"></r-reports-download-modal>
      </div>
    </accordion-panel-contents>

  </accordion>
</div>