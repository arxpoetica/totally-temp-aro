<style scoped>
  #table-coverage-initializer td {
    line-height: 33px;  /* To vertically align text */
  }
</style>
<table id="table-coverage-initializer"  ng-if="$ctrl.isSuperUser" class="table table-sm table-striped">
  <tbody>

    <!-- Coverage type -->
    <tr>
      <td>Coverage Type</td>
      <td>
        <select class="form-control"
                ng-model="$ctrl.coverageType"
                ng-options="item.id as item.name for item in $ctrl.coverageTypes"
                ng-change="$ctrl.setCoverageType($ctrl.coverageType)">
        </select>
      </td>
    </tr>

    <!-- Save site coverage -->
    <tr ng-if="$ctrl.coverageType === 'location'">
      <td>Save site coverage</td>
      <td>
        <input type="checkbox"
               class="checkboxfill"
               ng-checked="$ctrl.saveSiteCoverage"
               ng-click="$ctrl.setSaveSiteCoverage(!$ctrl.saveSiteCoverage)">
      </td>
    </tr>
    
    <!-- Limit To Marketable Technology -->
    <tr>
      <td>Limit To Marketable Technology</td>
      <td>
        <input type="checkbox"
               class="checkboxfill"
               ng-checked="$ctrl.useMarketableTechnologies"
               ng-click="$ctrl.setLimitMarketableTechnology(!$ctrl.useMarketableTechnologies)">
      </td>
    </tr>

    <!-- Limit To Max Equipment Speed -->
    <tr>
      <td>Limit To Max Equipment Speed</td>
      <td>
        <input type="checkbox"
               class="checkboxfill"
               ng-checked="$ctrl.useMaxSpeed"
               ng-click="$ctrl.setLimitMaxSpeed(!$ctrl.useMaxSpeed)">
      </td>
    </tr>

    <!-- Site assignment -->
    <tr>
      <td>Site Assignment</td>
      <td>
        <select class="form-control"
                ng-model="$ctrl.selectedSiteAssignment"
                ng-options="item as item for item in $ctrl.siteAssignments">
        </select>
      </td>
    </tr>

    <!-- The selection type (service areas/analysis areas) -->
    <tr>
      <td>Selection Type</td>
      <td>
        <select class="form-control" 
                ng-model="$ctrl.activeSelectionModeId"
                ng-change="$ctrl.onSelectionTypeChange($ctrl.activeSelectionModeId)"
                ng-options="item.id as item.description for item in $ctrl.selectionModes">
        </select>
      </td>
    </tr>
    <tr ng-if="$ctrl.activeSelectionModeId === $ctrl.SelectionModes.SELECTED_AREAS">
      <td>Selected Geographies({{$ctrl.serviceAreas.length || 0}})
        <a ng-if="$ctrl.serviceAreas.length > 0" ng-click="$ctrl.removeServiceAreas($ctrl.serviceAreas)">
          <span class="far fa-trash-alt trash"></span>
        </a>
      </td>
      <td> 
        <p ng-hide="$ctrl.serviceAreas.length > 0"><em>No geographies selected</em></p>
        <show-targets targets="$ctrl.serviceAreas"
                      remove-target="$ctrl.removeServiceAreas(target)"></show-targets>
      </td>
    </tr>
    <tr ng-if="$ctrl.activeSelectionModeId === $ctrl.SelectionModes.SELECTED_ANALYSIS_AREAS">
      <td>Selected Analysis Areas({{$ctrl.analysisAreas.length || 0}})
        <a ng-if="$ctrl.analysisAreas.length > 0" ng-click="$ctrl.removeAnalysisAreas($ctrl.analysisAreas)">
          <span class="far fa-trash-alt trash"></span>
        </a>
      </td>
      <td>
        <p ng-hide="$ctrl.analysisAreas.length > 0"><em>No analysis areas selected</em></p>
        <show-targets targets="$ctrl.analysisAreas"
                      remove-target="$ctrl.removeAnalysisAreas(target)" zoom-target="$ctrl.zoomTarget({target:$ctrl.targets})"></show-targets>
      </td>
    </tr>
  </tbody>
</table>

<!-- If we have a valid report, then disable all controls -->
<div ng-if="$ctrl.isSuperUser && $ctrl.coverageReport"
     class="disable-sibling-controls">

</div>
        
<div class="alert alert-danger" ng-if="!$ctrl.isSuperUser" style="margin-top: 60px;">
  You must be a system-wide superuser in order to use coverage reports.
</div>
