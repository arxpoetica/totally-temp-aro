<style scoped>
  #table-coverage-initializer td {
    line-height: 33px;  /* To vertically align text */
  }
</style>

<table id="table-coverage-initializer" class="table table-sm table-striped">
  <tbody>

    <!-- Coverage type -->
    <tr>
      <td>Coverage Type</td>
      <td>
        <select class="form-control"
                ng-model="$ctrl.coveragePlan.coverageType"
                ng-options="item.id as item.name for item in $ctrl.coverageTypes">
        </select>
      </td>
    </tr>

    <!-- Save site coverage -->
    <tr ng-if="$ctrl.coveragePlan.coverageType === 'location'">
      <td>Save site coverage</td>
      <td>
        <input type="checkbox"
               class="checkboxfill"
               ng-model="$ctrl.coveragePlan.saveSiteCoverage">
      </td>
    </tr>
    
    <!-- Use Marketable Technologies -->
    <tr>
      <td>Use Marketable Technologies</td>
      <td>
        <input type="checkbox"
               class="checkboxfill"
               ng-model="$ctrl.coveragePlan.useMarketableTechnologies">
      </td>
    </tr>

    <!-- Use Max Speed -->
    <tr>
      <td>Use Max Speed</td>
      <td>
        <input type="checkbox"
               class="checkboxfill"
               ng-model="$ctrl.coveragePlan.useMaxSpeed">
      </td>
    </tr>

    <!-- The selection type (service areas/analysis areas) -->
    <tr>
        <td>Selection Type</td>
        <td>
          <select class="form-control" 
                  ng-model="$ctrl.state.optimizationOptions.analysisSelectionMode"
                  ng-change="$ctrl.onSelectionTypeChange($ctrl.state.optimizationOptions.analysisSelectionMode)">
            <option ng-repeat="(selectionId, selectionVal) in $ctrl.allowedSelectionModes" value="{{selectionVal}}">{{$ctrl.selectionModeLabels[selectionVal]}}</option>
          </select>
        </td>
      </tr>
    <tr ng-if="$ctrl.state.optimizationOptions.analysisSelectionMode === $ctrl.state.selectionModes.SELECTED_AREAS">
      <td>Selected Geographies({{$ctrl.serviceAreas.length || 0}})
        <span class="far fa-trash-alt trash" ng-if="$ctrl.serviceAreas.length > 0" ng-click="$ctrl.removeServiceAreas($ctrl.serviceAreas)"></span>
      </td>
      <td> 
        <p ng-hide="$ctrl.serviceAreas.length > 0"><em>No geographies selected</em></p>
        <show-targets targets="$ctrl.serviceAreas"
                      remove-target="$ctrl.removeServiceAreas(target)"></show-targets>
      </td>
    </tr>
    <tr ng-if="$ctrl.state.optimizationOptions.analysisSelectionMode === $ctrl.state.selectionModes.SELECTED_ANALYSIS_AREAS">
      <td>Selected Analysis Areas({{$ctrl.analysisAreas.length || 0}})
        <span class="far fa-trash-alt trash" ng-if="$ctrl.analysisAreas.length > 0" ng-click="$ctrl.removeAnalysisAreas($ctrl.analysisAreas)"></span>
      </td>
      <td>
        <p ng-hide="$ctrl.analysisAreas.length > 0"><em>No analysis areas selected</em></p>
        <show-targets targets="$ctrl.analysisAreas"
                      remove-target="$ctrl.removeAnalysisAreas(target)" zoom-target="$ctrl.zoomTarget({target:$ctrl.targets})"></show-targets>
      </td>
    </tr>
  </tbody>
</table>

<button class="btn btn-block btn-primary" ng-click="$ctrl.initializeCoverageReport()">Initialize coverage report</button>

<!-- Spinner that will show up if the UI configuration is being loaded from the server -->
<div ng-show="$ctrl.isInitializingReport" style="position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; text-align: center; background-color: rgba(255, 255, 255, 0.7); z-index: 3;">
  <i class="fa fa-spinner fa-spin" style="font-size:48px; position: relative; top: 50%; transform: translateY(-50%); "></i>
</div>