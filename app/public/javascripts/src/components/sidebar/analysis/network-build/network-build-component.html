<div>
  <style scoped>
    #tblNetworkBuild td {
      line-height: 33px;  /* To vertically align text */
    }
    .indent-1 {
      padding-left: 30px !important;
    }
  </style>
  <table id="tblNetworkBuild" class="table table-condensed table-striped">
    <tbody>
      <tr>
        <td>Optimization Type</td>
        <td> 
          <select class="form-control"
            ng-model="$ctrl.state.optimizationOptions.uiSelectedAlgorithm"
            ng-options="item as item.label for item in $ctrl.state.optimizationOptions.uiAlgorithms">
          </select>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.uiSelectedAlgorithm.id === 'IRR_THRESH'">
        <td>IRR Threshold</td>
        <td>
          <div class="row">
              <div class="col-md-7">
                <input
                  type="range"
                  min="0"
                  max="1"
                  step="0.01"
                  ng-model="$ctrl.state.optimizationOptions.financialConstraints.preIrrThreshold"
                  style="margin-top: 10px">
              </div>
              <div class="col-md-5">
                <div class="form-group form-group-sm">
                  <div class="input-group input-group-sm">
                    <input
                      type="number"
                      ng-model="$ctrl.state.optimizationOptions.financialConstraints.preIrrThreshold"
                      class="form-control text-right"
                      percentage-input>
                    <div class="input-group-addon">%</div>
                  </div>
                </div>
              </div>
          </div>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.uiSelectedAlgorithm.id === 'IRR_TARGET'">
        <td>IRR Target</td>
        <td> 
          <div class="row">
              <div class="col-md-7">
                <input
                  type="range"
                  min="0"
                  max="1"
                  step="0.01"
                  ng-model="$ctrl.state.optimizationOptions.threshold"
                  style="margin-top: 10px">
              </div>
              <div class="col-md-5">
                <div class="form-group form-group-sm">
                  <div class="input-group input-group-sm">
                    <input
                      type="number"
                      ng-model="$ctrl.state.optimizationOptions.threshold"
                      class="form-control text-right"
                      percentage-input>
                    <div class="input-group-addon">%</div>
                  </div>
                </div>
              </div>
          </div>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.uiSelectedAlgorithm.id === 'BUDGET' || $ctrl.state.optimizationOptions.uiSelectedAlgorithm.id === 'IRR_TARGET'">
        <td>Target Capital ({{ $ctrl.config.currency_symbol }})</td>
        <td> 
          <input type="text" class="form-control text-right" placeholder="Amount"
            ng-model="$ctrl.state.optimizationOptions.budget">
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.uiSelectedAlgorithm.id === 'COVERAGE'">
        <td>Coverage Target</td>
        <td> 
          <div class="form-group form-group-sm">
            <div class="input-group input-group-sm">
              <div class="input-group-addon">%</div>
              <input percentage-input type="text"
                     class="form-control text-right"
                     placeholder="Percentage"
                     ng-model="$ctrl.state.optimizationOptions.threshold"
                     name="coverage_target">
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td>Endpoint Technology</td>
        <td>
          <div class="btn-group btn-group-sm">
            <button ng-repeat="technology in $ctrl.state.optimizationOptions.technologies"
                    ng-class="{'btn': true, 'btn-default': !technology.checked, 'btn-primary': technology.checked}"
                    ng-click="technology.checked = !technology.checked">
              {{technology.label}}
            </button>
          </div>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.technologies.FiveG.checked">
        <td class="indent-1">Polygon Type</td>
        <td> 
          <select class="form-control"
                  ng-model="$ctrl.state.optimizationOptions.networkConstraints.cellNodeConstraints.polygonStrategy">
            <option value="FIXED_RADIUS">Fixed Radius</option>
            <option value="AVERAGE_RADIUS">Average Radius</option>
            <option value="RAY_TRACING">Ray Tracing</option>
          </select>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.technologies.FiveG.checked">
        <td class="indent-1">Radius (m)</td>
        <td> 
          <input type="text" class="form-control text-right" placeholder="Cell Radius"
            ng-model="$ctrl.state.optimizationOptions.networkConstraints.cellNodeConstraints.cellRadius">
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.technologies.FiveG.checked">
        <td class="indent-1">Granularity Ratio</td>
        <td>
          <input type="text" class="form-control text-right" placeholder="Granularity Ratio"
            ng-model="$ctrl.state.optimizationOptions.networkConstraints.cellNodeConstraints.cellGranularityRatio">
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.technologies.FiveG.checked">
        <td class="indent-1">Minimum Ray Length</td>
        <td>
          <input type="text" class="form-control text-right" placeholder="Minimum Ray Length"
            ng-model="$ctrl.state.optimizationOptions.networkConstraints.cellNodeConstraints.minimumRayLength">
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.technologies.FiveG.checked">
        <td class="indent-1">Tile System</td>
        <td> 
          <select class="form-control ng-pristine ng-valid ng-touched"
            ng-model="$ctrl.state.optimizationOptions.networkConstraints.cellNodeConstraints.selectedTile"
            ng-change="changeTileSelected(tileselected)"
            ng-options="tile_system.name for tile_system in $ctrl.state.optimizationOptions.networkConstraints.cellNodeConstraints.tiles">
          </select>
        </td>
      </tr>
      <tr>
        <td width="48%">Network Construction</td>
        <td> 
          <select class="form-control ng-pristine ng-valid ng-touched" ng-model="$ctrl.state.optimizationOptions.networkConstraints.routingMode">
            <option value="DIRECT_ROUTING">Unsplit Routing</option>
            <option value="ODN_1" >Hub-Only Split</option>
            <option value="ODN_2">Hub-Distribution Split</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>Other Settings</td>
        <td> 
          <input type="checkbox"
                 class="checkboxfill"
                 ng-model="$ctrl.state.optimizationOptions.generatedDataRequest.generatePlanLocationLinks"
                 name="ctype-name"> Save Routed Locations
        </td>
      </tr>
      <tr>
        <td>Selection Type</td>
        <td>
          <select class="form-control" 
                  ng-model="$ctrl.state.optimizationOptions.analysisSelectionMode">
            <option ng-repeat="(selectionId, selectionText) in $ctrl.state.selectionModes" value="{{selectionId}}">{{selectionText}}</option>
          </select>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.analysisSelectionMode === 'SELECTED_AREAS'">
        <td>Selected Geographies</td>
        <td> 
          <p ng-hide="$ctrl.serviceAreas.length > 0"><em>No geographies selected</em></p>
          <show-targets id="network-build-target-geog" targets="$ctrl.serviceAreas"
                        remove-target="$ctrl.removeServiceArea({target:target})"></show-targets>
        </td>
      </tr>
      <tr ng-if="$ctrl.state.optimizationOptions.analysisSelectionMode === 'SELECTED_LOCATIONS'">
        <td>Selected Locations</td>
        <td>
          <p ng-hide="$ctrl.targets.length > 0"><em>No locations selected</em></p>
          <show-targets id="network-build-target-loc" targets="$ctrl.targets"
                        remove-target="$ctrl.removeTarget({target:target})" zoom-target="$ctrl.zoomTarget({target:target})"></show-targets>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- Add a div that will overlay all the controls above. The div will be visible when the controls need to be disabled. -->
  <div class="disable-sibling-controls"
       ng-hide="$ctrl.areControlsEnabled">
  </div>
</div>
