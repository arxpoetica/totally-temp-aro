<!-- Show the "Run" button only if the current plan is in START_STATE or INITIALIZED state -->
<button ng-if="$ctrl.plan.planState === 'START_STATE' || $ctrl.plan.planState === 'INITIALIZED'"
        ng-class="{ 'btn btn-block': true, 'btn-default': !$ctrl.areInputsComplete(), 'btn-primary': $ctrl.areInputsComplete() }"
        ng-click="$ctrl.runOptimization()">
  <i class="fa fa-bolt"></i> Run
</button>

<!-- Show the progress bar only if the current plan is in STARTED state -->
<div style="height: 34px; width: 100%; display: flex" ng-if="$ctrl.plan.planState === 'STARTED'"
      ng-disabled="$ctrl.isCanceling">
  <div style="flex: 1 1 auto;">
    <div class="progress"
        style="height: 100%">
      <div class="progress-bar progress-bar-optimization"
          role="progressbar"
          aria-valuenow="$ctrl.progressPercent"
          aria-valuemin="0"
          aria-valuemax="100"
          ng-style="{ 'line-height': '34px', width: $ctrl.progressPercent + '%' }">
      </div>
    </div>
    <!-- A div overlaid on top of the progress bar, so we can always see the text. Lot of custom css! -->
    <div style="position:relative; top:-47px; background-color: rgba(0, 0, 0, 0.4); color: white; width: 120px; text-align: center; border-radius: 3px; margin: auto; font-weight: bold">
      {{$ctrl.progressMessage}}
    </div>
  </div>
  <button class="btn btn-danger"
          style="flex: 0 0 auto;"
          ng-click="$ctrl.cancelOptimization()">
            {{$ctrl.isCanceling ? 'Canceling' : 'Cancel'}}
  </button>
</div>

<!-- Show the modify button if the current plan is in COMPLETED, CANCELED or FAILED state -->
<button ng-if="$ctrl.plan.planState === 'COMPLETED' || $ctrl.plan.planState === 'CANCELED' || $ctrl.plan.planState === 'FAILED'"
        class="btn btn-block modify-analysis-button"
        ng-click="$ctrl.handleModifyClicked()">
  Modify
</button>

<!-- A spacer div -->
<div style="width: 100%; padding-bottom: 20px"></div>
