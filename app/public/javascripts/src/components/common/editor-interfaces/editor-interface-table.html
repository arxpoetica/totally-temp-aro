
<div>
  <!-- 
  <div class="ei-header">{{$ctrl.rows.title}}</div>
  -->
  
  <div class="ei-table-contain">
	  <table class="table table-sm ei-table-foldout-striped" style="border-bottom: 1px solid #dee2e6;">
      <thead class="{{$ctrl.theadClass}}">
	      <tr>
	        <th ng-if="!!$ctrl.detailView"></th>
	        <th class="ei-table-col-head-sortable" 
	             ng-repeat="(colKey, colValue) in $ctrl.displayProps"
	             ng-click="$ctrl.setOrderCol(colValue.propertyName)">
	          {{colValue.displayName}}
	          <div class="ei-table-col-sort-icon" ng-if="$ctrl.orderCol == colValue.propertyName">
	            <i ng-if="$ctrl.isOrderAscending" class="fa fa-chevron-down" aria-hidden="true"> </i>
	            <i ng-if="!$ctrl.isOrderAscending" class="fa fa-chevron-up" aria-hidden="true"> </i>
	          </div>
	        </th>
	        <th class="ei-table-col-head" ng-if="!!$ctrl.actions"></th>
	      </tr>
	    </thead>
	    <tbody>
	      <tr ng-class="$ctrl.openRowId == rowValue[$ctrl.idProp] ? 'ei-foldout-table-open' : ''" class="ei-table-row" 
	          ng-repeat-start="(rowKey, rowValue) in $ctrl.rows | limitTo : $ctrl.rowsPerPage : $ctrl.pageOffset * $ctrl.rowsPerPage">
	        <td ng-if="!!$ctrl.detailView" 
	            ng-click="$ctrl.toggleRow(rowValue[$ctrl.idProp])">
	          <i class="far fa-plus-square ei-foldout-icon ei-foldout-icon-table-closed"></i>
            <i class="far fa-minus-square ei-foldout-icon ei-foldout-icon-table-open"></i>
	        </td>
	        <td class="ei-table-cell" 
	            data-toggle="tooltip" data-placement="bottom" title="{{rowValue[colValue.propertyName]}}"
	            ng-repeat="(colKey, colValue) in $ctrl.displayProps">
	          <div class="ei-table-content">
		          <editor-interface-value ng-if="rowValue.hasOwnProperty(colValue.propertyName)"
		                                  display-props="colValue" 
	                                    on-change="$ctrl.onChange()" 
	                                    model="rowValue[colValue.propertyName]" 
	                                    is-edit="$ctrl.isEdit"
	                                    parent-obj="rowValue"
	                                    root-meta-data="$ctrl.rootMetaData">
		          </editor-interface-value>
	          </div>
	        </td>
	        <td class="ei-table-cell ei-table-button-cell" ng-if="!!$ctrl.actions">
	          <button class="btn btn-sm ng-class: btnValue.buttonClass;" 
	                  ng-if="$ctrl.actionDisplayLimit >= $ctrl.actions.length"
	                  ng-repeat="(btnKey, btnValue) in $ctrl.actions"
	                  ng-click="btnValue.callBack(rowValue, rowKey)"
	                  data-toggle="tooltip" data-placement="bottom" title="{{btnValue.toolTip}}"><i ng-if="'' != btnValue.iconClass" ng-class="btnValue.iconClass" class="fa ei-button-icon"></i>{{'' != btnValue.iconClass ? ' ' : ''}}{{'' == btnValue.iconClass ? btnValue.buttonText : ''}}</button>
	          
	          <div class="btn-group" ng-if="$ctrl.actionDisplayLimit < $ctrl.actions.length">
						  <button type="button" class="btn btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						    <i class="fa fa-bars ei-button-icon"></i>
						  </button>
						  <div class="dropdown-menu dropdown-menu-right">
						    <button class="dropdown-item" type="button"
						            ng-repeat="(btnKey, btnValue) in $ctrl.actions"
                        ng-click="btnValue.callBack(rowValue, rowKey)">{{btnValue.buttonText}}</button>
						  </div>
						</div>
						
	        </td>
	      </tr>
	      <tr class="ei-foldout-row" ng-repeat-end>
	        <td colspan="999" ng-if="$ctrl.detailView">
	          <!-- ToDo: use a better strategy for dynamic components -->
	          <resource-manager-detail ng-if="$ctrl.detailView == 'resource-manager-detail'"
	                                   resource-manager="rowValue"
	                                   resource-type="$ctrl.detailData.resourceType">
	          </resource-manager-detail>
	        </td>
	      </tr>
	      <!-- should NOT be in repeat -->
	      <tr><td colspan="999" class="ei-table-bottomline"></td></tr>
	    </tbody>
	  </table>
  </div>
  
  <div class="ei-pagination-menu" ng-if="$ctrl.rowsPerPage < $ctrl.rows.length">
    <div class="ei-pagination-item" ng-repeat="page in $ctrl.pages track by $index+page">
      <div class="ei-pagination-item-nonactive" ng-if="-1 == page || $ctrl.pageOffset == page">{{-1 == page ? "…" : page+1}}</div>
      <div class="ei-pagination-item-active" ng-if="-1 != page && $ctrl.pageOffset != page" ng-click="$ctrl.setPage(page)">{{-1 == page ? "…" : page+1}}</div>
    </div>
  </div>
  
</div>